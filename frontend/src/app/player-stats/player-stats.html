<!-- player-stats.html -->

<!-- Navbar -->
<header class="navbar">
  <div class="brand" (click)="goHome()">
    <span class="brand-name">CricTech Analytics</span>
  </div>
</header>

<!-- Layout -->
<div class="stats-layout">
  <!-- Sidebar -->
  <aside class="sidebar">
    <h3>Teams</h3>
    <ul>
      <li
        *ngFor="let team of teams"
        [class.active]="selectedTeam === team"
        (click)="selectTeam(team)"
      >
        {{ team }}
      </li>
      <li [class.active]="!selectedTeam" (click)="selectTeam('')">All Teams</li>
    </ul>

    <h3>Seasons</h3>
    <ul>
      <li
        *ngFor="let year of seasons"
        [class.active]="selectedSeason === year"
        (click)="selectSeason(year)"
      >
        {{ year }}
      </li>
      <li [class.active]="selectedSeason === null" (click)="selectSeason(null)">
        All Seasons
      </li>
    </ul>
  </aside>

  <!-- Main Content -->
  <section class="main-content">
    <h2>üèè Player Stats Dashboard</h2>

    <div class="filters-bar">
      <input
        type="text"
        [(ngModel)]="searchText"
        (ngModelChange)="onSearchChange()"
        placeholder="Search player name..."
        class="search-input"
      />
      <button class="clear-button" (click)="clearFilters()">
        Clear Filters
      </button>
    </div>

    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>Player</th>
            <th>Team</th>
            <th (click)="toggleSort('season')">
              Season
              <span *ngIf="sortField === 'season'"
                >{{ sortDirection === 'asc' ? '‚ñ≤' : '‚ñº' }}</span
              >
            </th>
            <th (click)="toggleSort('runs')">
              Runs
              <span *ngIf="sortField === 'runs'"
                >{{ sortDirection === 'asc' ? '‚ñ≤' : '‚ñº' }}</span
              >
            </th>
            <th (click)="toggleSort('wickets')">
              Wickets
              <span *ngIf="sortField === 'wickets'"
                >{{ sortDirection === 'asc' ? '‚ñ≤' : '‚ñº' }}</span
              >
            </th>
            <th>Strike Rate</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let player of players">
            <td>{{ player.player }}</td>
            <td>{{ player.team }}</td>
            <td>{{ player.season }}</td>
            <td>{{ player.runs }}</td>
            <td>{{ player.wickets }}</td>
            <td>{{ player.strikeRate }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <app-player-charts [players]="players"></app-player-charts>
  </section>
</div>
